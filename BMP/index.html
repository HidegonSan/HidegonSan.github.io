<!DOCTYPE html>

<html lang="ja">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="content-type" charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

		<title>CTRPF Background Converter</title>
		<meta name="description" content="Convert any image to be used in a CTRPF background" />
		<meta name="author" content="Hidegon" />
		<meta name="format-detection" content="telephone=no" />

		<!-- Favicon -->
		<link rel="icon" href="data:image/x-icon;,">

		<!-- OGP -->
		<meta property="og:description" content="Convert any image to be used in a CTRPF background" />
		<meta property="og:title" content="CTRPF Background Converter" />
		<meta property="og:url" content="https://HidegonSan.github.io/BMP/" />
		<meta property="og:type" content="article" />
		<meta property="og:site_name" content="CTRPF Background Converter" />
		<meta property="og:locale" content="en_US" />

		<!-- Twitter card -->
		<meta name="twitter:card" content="summary" />
		<meta name="twitter:site" content="@Hidegon_" />

		<!-- CSS -->

		<style type="text/css">
			body {
				background-color: #3E3E3E;
				color: white;
				font-weight: bold;
				text-align: center;
			}

			.hide {
				display: none;
			}

			#title {
				font-size: 1.5em;
				margin-bottom: 35vh;
			}

			.btn {
				padding: 1em;
				border: 2px solid #5E5E5E;
				border-radius: 1em;
				font-size: 1.2em;
				background-color: #2E2E2E;
			}
		</style>
	</head>

	<body>
		<div style="display: none;">
			<img>
			<canvas id="top_canvas"></canvas>
			<canvas id="bottom_canvas"></canvas>
			<a href="" id="a_top" download="Topbackground.bmp"></a>
			<a href="" id="a_bottom" download="Bottombackground.bmp"></a>
		</div>
		<div id="title">CTRPF&nbsp;Background&nbsp;Converter</div>
		<label for="upload" id="upload_label" class="btn">Upload<input type="file" accept="image/*" id="upload" name="upload" class="hide"></label>
		<span id="download" class="hide btn">Download</span>
	</body>

	<script language="javascript" type="text/javascript">
		function convert(image_data) {
			var top_canvas = document.getElementById("top_canvas")
			top_canvas.width = 340;
			top_canvas.height = 200;
			var top_ctx = top_canvas.getContext("2d");
			var top_img = new Image;
			top_img.addEventListener("loadend", function() {
				top_ctx.drawImage(top_img, 0, 0, 340, 200);
				document.getElementById("a_top").href = top_canvas.toDataURL("image/bmp");
			});
			top_img.src = image_data;

			var bottom_canvas = document.getElementById("bottom_canvas")
			bottom_canvas.width = 280;
			bottom_canvas.height = 200;
			var bottom_ctx = bottom_canvas.getContext("2d");
			var bottom_img = new Image;
			bottom_img.addEventListener("loadend", function() {
				bottom_ctx.drawImage(bottom_img, 0, 0, 280, 200);
				document.getElementById("a_bottom").href = bottom_canvas.toDataURL("image/bmp");
			});
			bottom_img.src = image_data;
		}

		function upload_event(e) {
			var file = e.target.files[0]
			var reader = new FileReader();
			reader.addEventListener("loadend", function() {
				var image_data = reader.result;
				convert(image_data);
			});
			reader.readAsDataURL(file);
			document.getElementById("download").classList.remove("hide");
			document.getElementById("upload_label").classList.add("hide");
		}

		document.getElementById("upload").addEventListener("change", upload_event);
		document.getElementById("download").addEventListener("click", function() {
			document.getElementById("a_top").click();
			document.getElementById("a_bottom").click();
		});
	</script>
</html>


<!-- (C) 2022 Hidegon -->
<!-- This file is part of https://HidegonSan.github.io/BMP/ -->
